# ThinkPad T15 Gen1 暴力频率与独显电源管理脚本（Linux）

> **别问，问就是极限超频，不降频，不限温，不讲武德。**

## 🚀 项目简介

本项目旨在帮助 ThinkPad T15 Gen1 用户（或者类似机型）在 Ubuntu 桌面版上
一键切换 CPU 和独立显卡（NVIDIA MX330）性能模式：

* **初始化**：安装依赖，干掉系统“善意”的温控和节能守护进程，黑名单热相关内核模块。
* **CPU 极限模式**：锁最高频率，关闭热限制，暴力拉满性能。
* **CPU 保守模式**：限制 CPU 频率到 1300MHz，降低功耗和发热，给电池一点活路。
* **独显彻底关闭**：通过禁用 PCI 设备加 ACPI 断电，断掉独显电源（物理拔线级别）。
* **独显重新开启**：热插拔 PCI 设备，打开独显电源。
* **恢复默认**：恢复所有服务和驱动，恢复 CPU 和独显默认调度和功耗策略。

一切功能集成在一个交互式脚本中，操作方便，风险大，请务必谨慎！

## 🖥️ 适用机型与环境

* **机型**：ThinkPad T15 Gen1（其他单风扇类似设计可尝试，但风险自负）
* **系统**：Ubuntu 桌面版（22.04 及以后推荐）
* **GPU**：NVIDIA MX330 独立显卡（或者其他 PCI 独显也可尝试）
* **依赖**：`cpufrequtils`、`pciutils`、`nvidia-smi`（可选）

## 📦 安装与运行

```bash
# 克隆仓库（假设你fork或已有仓库）
git clone https://github.com/3234374354/ThinkPad-T15-Gen1-BOOM-linux.git
cd ThinkPad-T15-Gen1-BOOM-linux

# 赋予执行权限
chmod +x extreme_tune.sh

# 以 root 权限运行脚本（强烈建议）
sudo ./extreme_tune.sh
```

启动脚本后你会看到以下菜单选项，按提示操作即可：

```
1) 初始化（安装依赖，停止热管理服务，黑名单热模块）
2) CPU 极限模式（锁最高频）
3) CPU 保守节能模式（1300MHz）
4) 彻底关闭独立显卡（禁用 PCI 设备 + 断电）
5) 重新开启独立显卡（热插拔 + 上电）
6) 恢复默认设置（启用服务，恢复 CPU 和独显）
0) 退出
```

## 🔍 原理剖析

* **CPU 频率控制**：使用 `cpufreq-set` 或直接写 `/sys/devices/system/cpu/cpu*/cpufreq/` 文件，强制锁定最大频率或者限制为 1300MHz。
* **热管理服务关闭**：停止并禁用 `thermald`、`power-profiles-daemon`、`tlp` 等可能干扰性能的守护进程。
* **热模块黑名单**：卸载并黑名单内核的热管理模块如 `intel_rapl`、`intel_powerclamp`、`powerclamp`、`thermal`，避免系统自动限频。
* **独显电源控制**：通过 PCI 热拔插接口 `/sys/bus/pci/devices/0000:xx:xx.x/remove` 和 `/sys/bus/pci/rescan`，配合写 `/power/control` 来断电和重新供电独显，达到物理拔线断电效果。
* **GPU 频率与功耗不再干预**：相比以前版本，取消了无用的 `nvidia-smi` 频率锁定和功耗设置，避免混乱和失败。

## ⚠️ 安全 & 风险警告

* **发热风险极大**：极限模式下 CPU 全核满载，温度飙升极快，膝盖烫手是真的。
* **系统稳定性下降**：可能黑屏、死机，尤其在散热条件不足时。
* **硬件寿命受损**：风扇、导热膏、主板元件寿命都会被大幅缩短。
* **保修与售后风险**：官方可能不会认可这些“酷刑”操作，请自行承担。

💡 **你就是那只勇敢又叛逆的蚂蚱，我们为你喝彩，但别拿命开玩笑。**

## 🤖 关于本项目的作者

本 README 与脚本由 **GPT-5** 辅助撰写，结合实战经验和极限调控思路。

* 优点：操作简洁，功能直击痛点，交互式设备选择更灵活。
* 缺点：不提供任何硬件保障，使用需三思。

---

用极限模式前，务必准备好外接散热设备，别光靠内置风扇，确保备份重要数据！
你敢爆，就是猛！
